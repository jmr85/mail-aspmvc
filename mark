Práctica Mail MVC
=======================================================
- El Entry Point PanelController Index() http://localhost:xxxxx/
- Primero le agregué un Modelo **EmailFormModel.cs** en carpeta Models, ahi mismo con annotations se muestra cada propiedad su label en la view y tambien valida la entrada de datos mediante expresiones regulares
```csharp
   public class EmailFormModel
    {
       
        [RegularExpression("\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*", ErrorMessage = "Mail ingresado invalido, tiene que ser este formato: pepito@mail.com, trata que sea un mail existente")]
        [Required, Display(Name = "Para"), EmailAddress]
        public string FromEmail { get; set; }

        [RegularExpression(@"[a-zA-ZñÑ\s]{4,30}", ErrorMessage = "Minimo 4 letras")]
        [Required, Display(Name = "Asunto")]
        public string FromSubject { get; set; }

        [Required, Display(Name = "Mensaje")]
        public string Message { get; set; }
    }
```
- Después el servidor de Gmail lo configuré en **Web.config** agregando los tags:
   ```xml
<system.net>
   <mailSettings>
      <smtp from="juan.martin.ruiz@gmail.com">
        <network host="smtp.gmail.com" port="587" userName="juan.martin.ruiz@gmail.com" password="tu contraseña" enableSsl="true" />
      </smtp>
   </mailSettings>
</system.net>
    ```
- La acción de PanelController.cs Enviar() queda asi, ya no le paso variables sino el mismo modelo como parametro:
   ```csharp
    [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Enviar(EmailFormModel model)
        {
            var mensaje = "";
            if (ModelState.IsValid)
            {
                var message = new MailMessage();
                message.To.Add(new MailAddress(model.FromEmail)); // Mail destinatario
                message.Subject = model.FromSubject; // Asunto
                message.Body = model.Message; // mensaje
                message.IsBodyHtml = true;

                try
                {
                    var smtp = new SmtpClient();
                    smtp.Send(message);
                    
                    mensaje = "Email has been sent successfully.";
                }       
                catch (Exception ex)
                {
                    mensaje = "ERROR: " + ex.Message;
                } 
            }

            ViewBag.mensaje = mensaje;
            return View("/Views/Panel/Mensaje.cshtml");
        }
    ```
---


Práctica Session MVC
=======================================================
- El action Panel (el "Index") arranca desde http://localhost:xxxxx/
- Carga de datos http://localhost:xxxxx/Registro/Cargar
- Después de guardar va acá: http://localhost:xxxxx/Registro/Guardar
- En el Mensaje hay un botón para ir a la Lista de Alumnos en http://localhost:xxxxx/Registro/Listar
![lista-alumnos](https://dl.dropboxusercontent.com/u/66233180/lista-alumnos.jpg)

---
Agenda
=======================================================
- Programado con C#
- Interfaz de texto/consola
- Con validaciones
- Excepciones
